{% extends "base-site.html" %}

{% block title %} Chatbot {% endblock %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
    <style>
        .chart-area {
            height: 600px !important;
        }
    </style>
{% endblock stylesheets %}

{% block content %}

    <!-- content -->
    <div class="row">
        <div class="col-12">
            <div class="card card-chart">
                <div class="card-header ">
                    <div class="row">
                        <div class="col-sm-6 text-left">
                            <h5 class="card-category">Tweets</h5>
                            <h2 class="card-title">Timeline</h2>
                        </div>
                        <div class="col-sm-6">
                            <div class="btn-group btn-group-toggle float-right" data-toggle="buttons">
                                <label class="btn btn-sm btn-primary btn-simple active" id="0">
                                    <input type="radio" name="options" checked>
                                    <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">Day</span>
                                    <span class="d-block d-sm-none">
                  <i class="tim-icons icon-single-02"></i>
                </span>
                                </label>
                                <label class="btn btn-sm btn-primary btn-simple" id="1">
                                    <input type="radio" class="d-none d-sm-none" name="options">
                                    <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">Month</span>
                                    <span class="d-block d-sm-none">
                  <i class="tim-icons icon-gift-2"></i>
                </span>
                                </label>
                                <label class="btn btn-sm btn-primary btn-simple" id="2">
                                    <input type="radio" class="d-none" name="options">
                                    <span class="d-none d-sm-block d-md-block d-lg-block d-xl-block">Year</span>
                                    <span class="d-block d-sm-none">
                  <i class="tim-icons icon-tap-02"></i>
                </span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="chart-area">
                        <canvas id="chartBig1"></canvas>
                    </div>
                </div>
            </div>
        </div>

    </div>


{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
    <script>
          $.post("http://localhost:5000/tweets", {scope: "day"}, handle_response);

        function handle_response(data) {
            // update data
            console.log(data);
            var chart_labels = [];
            var chart_data = []

        }
        var chart_labels = ['2019-07-12', '2019-07-11', '2019-07-10', '2019-07-09', '2019-07-08', '2019-07-07', '2019-07-06', '2019-07-05', '2019-07-04', '2019-07-03', '2019-07-02', '2019-11-27', '2019-11-26', '2019-11-25', '2019-11-24', '2019-11-23', '2019-11-22', '2019-11-21', '2019-11-20', '2019-11-19', '2019-11-18', '2019-11-17', '2019-06-10', '2019-06-09', '2019-06-08', '2019-06-07', '2019-06-06', '2019-06-05', '2019-06-04', '2019-06-03', '2019-06-02', '2019-06-01', '2019-11-06', '2019-11-05', '2019-11-04', '2019-11-03', '2019-11-02', '2019-11-01', '2019-10-31', '2019-10-30', '2019-10-29', '2019-10-28', '2019-10-27', '2019-07-23', '2019-07-22', '2019-07-21', '2019-07-20', '2019-07-19', '2019-07-18', '2019-07-17', '2019-07-16', '2019-07-15', '2019-07-14', '2019-07-13', '2019-08-02', '2019-08-01', '2019-07-31', '2019-07-30', '2019-07-29', '2019-07-28', '2019-07-27', '2019-07-26', '2019-07-25', '2019-07-24', '2019-09-14', '2019-09-13', '2019-09-12', '2019-09-11', '2019-09-10', '2019-09-09', '2019-09-08', '2019-09-07', '2019-09-06', '2019-09-05', '2019-09-04', '2019-12-07', '2019-12-06', '2019-12-05', '2019-12-04', '2019-12-03', '2019-12-02', '2019-12-01', '2019-11-30', '2019-11-29', '2019-11-28', '2019-10-15', '2019-10-14', '2019-10-13', '2019-10-12', '2019-10-11', '2019-10-10', '2019-10-09', '2019-10-08', '2019-10-07', '2019-10-06', '2019-10-26', '2019-10-25', '2019-10-24', '2019-10-23', '2019-10-22', '2019-10-21', '2019-10-20', '2019-10-19', '2019-10-18', '2019-10-17', '2019-10-16', '2019-09-03', '2019-09-02', '2019-09-01', '2019-08-31', '2019-08-30', '2019-08-29', '2019-08-28', '2019-08-27', '2019-08-26', '2019-08-25', '2019-08-24', '2019-12-29', '2019-12-28', '2019-12-27', '2019-12-26', '2019-12-25', '2019-12-24', '2019-12-23', '2019-12-22', '2019-12-21', '2019-12-20', '2019-12-19', '2019-07-01', '2019-06-30', '2019-06-29', '2019-06-28', '2019-06-27', '2019-06-26', '2019-06-25', '2019-06-24', '2019-06-23', '2019-06-22', '2019-10-05', '2019-10-04', '2019-10-03', '2019-10-02', '2019-10-01', '2019-09-30', '2019-09-29', '2019-09-28', '2019-09-27', '2019-09-26', '2019-09-25', '2019-08-13', '2019-08-12', '2019-08-11', '2019-08-10', '2019-08-09', '2019-08-08', '2019-08-07', '2019-08-06', '2019-08-05', '2019-08-04', '2019-08-03', '2019-11-16', '2019-11-15', '2019-11-14', '2019-11-13', '2019-11-12', '2019-11-11', '2019-11-10', '2019-11-09', '2019-11-08', '2019-11-07', '2019-09-24', '2019-09-23', '2019-09-22', '2019-09-21', '2019-09-20', '2019-09-19', '2019-09-18', '2019-09-17', '2019-09-16', '2019-09-15', '2019-06-21', '2019-06-20', '2019-06-19', '2019-06-18', '2019-06-17', '2019-06-16', '2019-06-15', '2019-06-14', '2019-06-13', '2019-06-12', '2019-06-11', '2019-08-23', '2019-08-22', '2019-08-21', '2019-08-20', '2019-08-19', '2019-08-18', '2019-08-17', '2019-08-16', '2019-08-15', '2019-08-14', '2019-12-18', '2019-12-17', '2019-12-16', '2019-12-15', '2019-12-14', '2019-12-13', '2019-12-12', '2019-12-11', '2019-12-10', '2019-12-09', '2019-12-08'];
        var chart_data = [54, 31, 72, 49, 47, 33, 26, 54, 37, 78, 31, 51, 44, 37, 25, 28, 38, 43, 33, 41, 38, 32, 85, 27, 44, 53, 67, 36, 72, 45, 48, 48, 69, 49, 33, 20, 13, 33, 66, 32, 38, 19, 32, 63, 43, 19, 36, 69, 32, 55, 79, 67, 33, 38, 61, 43, 32, 35, 49, 54, 59, 68, 76, 50, 60, 64, 55, 59, 50, 36, 33, 36, 41, 33, 34, 53, 41, 79, 74, 54, 76, 30, 26, 61, 33, 39, 38, 27, 35, 52, 142, 33, 34, 91, 55, 54, 41, 60, 42, 44, 79, 32, 40, 58, 37, 39, 48, 35, 43, 44, 32, 57, 52, 59, 55, 55, 114, 38, 25, 47, 29, 32, 30, 40, 52, 137, 96, 89, 70, 33, 38, 87, 77, 94, 70, 40, 40, 110, 86, 39, 43, 51, 38, 45, 63, 91, 63, 71, 53, 82, 49, 66, 46, 89, 136, 65, 36, 36, 55, 50, 53, 161, 76, 50, 60, 49, 25, 31, 128, 63, 87, 75, 46, 71, 94, 65, 110, 119, 66, 53, 114, 86, 48, 90, 261, 19, 27, 54, 45, 57, 55, 150, 91, 104, 115, 356, 19, 45, 40, 36, 54, 101, 120, 491, 49, 30, 46, 44, 45, 56, 54, 54];

        gradientChartOptionsConfigurationWithTooltipPurple = {
            maintainAspectRatio: false,
            legend: {
                display: false
            },

            tooltips: {
                backgroundColor: '#f5f5f5',
                titleFontColor: '#333',
                bodyFontColor: '#666',
                bodySpacing: 4,
                xPadding: 12,
                mode: "nearest",
                intersect: 0,
                position: "nearest"
            },
            responsive: true,
            scales: {
                yAxes: [{
                    barPercentage: 1.6,
                    gridLines: {
                        drawBorder: false,
                        color: 'rgba(29,140,248,0.0)',
                        zeroLineColor: "transparent",
                    },
                    ticks: {
                        suggestedMin: 60,
                        suggestedMax: 125,
                        padding: 20,
                        fontColor: "#9a9a9a"
                    }
                }],

                xAxes: [{
                    barPercentage: 1.6,
                    gridLines: {
                        drawBorder: false,
                        color: 'rgba(225,78,202,0.1)',
                        zeroLineColor: "transparent",
                    },
                    ticks: {
                        padding: 20,
                        fontColor: "#9a9a9a"
                    }
                }]
            }
        };

        var ctx = document.getElementById("chartBig1").getContext('2d');

        var gradientStroke = ctx.createLinearGradient(0, 230, 0, 50);

        gradientStroke.addColorStop(1, 'rgba(72,72,176,0.1)');
        gradientStroke.addColorStop(0.4, 'rgba(72,72,176,0.0)');
        gradientStroke.addColorStop(0, 'rgba(119,52,169,0)'); //purple colors
        var config = {
            type: 'line',
            data: {
                labels: chart_labels,
                datasets: [{
                    label: "Tweets",
                    fill: true,
                    backgroundColor: gradientStroke,
                    borderColor: '#d346b1',
                    borderWidth: 2,
                    borderDash: [],
                    borderDashOffset: 0.0,
                    pointBackgroundColor: '#d346b1',
                    pointBorderColor: 'rgba(255,255,255,0)',
                    pointHoverBackgroundColor: '#d346b1',
                    pointBorderWidth: 20,
                    pointHoverRadius: 4,
                    pointHoverBorderWidth: 15,
                    pointRadius: 4,
                    data: chart_data,
                }]
            },
            options: gradientChartOptionsConfigurationWithTooltipPurple
        };
        var myChartData = new Chart(ctx, config);
        $("#0").click(function () {
            var data = myChartData.config.data;
            data.datasets[0].data = chart_data;
            data.labels = chart_labels;
            myChartData.update();
        });
        $("#1").click(function () {
            var chart_data = [1540, 1443, 1970, 1516, 2292, 1799, 2112];
            var data = myChartData.config.data;
            data.datasets[0].data = chart_data;
            data.labels = ['July', 'November', 'June', 'October', 'August', 'September', 'December'];
            myChartData.update();
        });

        $("#2").click(function () {
            var chart_data = [60, 80, 65, 130, 80, 105, 90, 130, 70, 115, 60, 130];
            var data = myChartData.config.data;
            data.datasets[0].data = chart_data;
            data.labels = chart_labels;
            myChartData.update();
        });

    </script>
{% endblock javascripts %}
